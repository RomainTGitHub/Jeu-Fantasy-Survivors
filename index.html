<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fantasy Survivors</title>
    <link rel="icon" href="https://placehold.co/32x32/FFD700/000000?text=%E2%9C%A8" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <!-- Lien vers la feuille de style externe -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="game-container">
        <canvas id="gameCanvas"></canvas>
        <div id="ui-container"></div>
        <div id="tooltip" class="tooltip"></div>
        <!-- Menu Principal -->
        <div id="main-menu">
            <canvas id="menu-background-canvas"></canvas>
            <h1>Fantasy Survivors</h1>
            <button id="startGameButton">Jouer !</button>
            <button id="upgradesMenuButton">Améliorations</button>
            <button id="statsMenuButton">Stats</button>
            <button id="optionsMenuButton">Options</button>
            <p id="main-menu-gold">Or: 0</p>

            <p class="survival-text">Combien de temps allez-vous survivre? ;)</p>

        </div>

        <!-- Menu des améliorations permanentes -->
        <div id="permanent-upgrades-menu" class="modal">
            <div class="modal-content">
                <button id="resetUpgradesButton">Reset</button>
                <h2>Améliorations</h2>
                <div id="upgrades-grid">
                    <!-- Les boutons d'amélioration seront ajoutés ici par JS -->
                </div>
                <p id="upgrades-menu-gold">Or: 0</p>
                <button id="upgradesBackButton">Retour</button>
            </div>
        </div>

        <!-- Menu des statistiques -->
        <div id="stats-menu" class="modal">
            <div class="modal-content">
                <h2>Statistiques</h2>
                <div id="stats-container">
                    <h3>Personnage</h3>
                    <div id="character-stats-grid" class="stats-grid"></div>
                    <h3>Globales</h3>
                    <div id="global-stats-grid" class="stats-grid"></div>
                </div>
                <button id="statsBackButton">Retour</button>
            </div>
        </div>


        <!-- Modal de confirmation de réinitialisation -->
        <div id="reset-confirmation-modal" class="modal">
            <div class="modal-content">
                <h2>Réinitialiser?</h2>
                <p>Toutes vos améliorations seront réinitialisées et votre or sera remboursé. Êtes-vous sûr ?</p>
                <button id="confirmResetButton">Oui</button>
                <button id="cancelResetButton">Non</button>
            </div>
        </div>


        <!-- Menu Pause -->
        <div id="pause-modal" class="modal">
            <div class="modal-content">
                <h2>PAUSE</h2>
                <div id="pause-stats">
                    <p id="pause-level">Niveau: </p>
                    <p id="pause-timer">Temps écoulé: </p>
                    <p id="pause-kill-count">Kills: </p>
                </div>
                <div id="pause-upgrades">
                    <h3>Améliorations:</h3>
                    <ul id="pause-upgrades-list"></ul>
                </div>
                <button onclick="resumeGame()">Reprendre</button>
                <button onclick="showOptionsFromPause()">Options</button>
                <button onclick="quitGame()">Quitter la partie</button>
            </div>
        </div>
        <!-- Menu Options -->
        <div id="options-modal" class="modal">
            <div class="modal-content">
                <h2>OPTIONS</h2>
                <div class="volume-control">
                    <label for="music-volume-slider">Volume Musique:</label>
                    <input type="range" id="music-volume-slider" min="0" max="1" step="0.01" value="1">
                </div>
                <div class="volume-control">
                    <label for="sfx-volume-slider">Volume Effets Sonores:</label>
                    <input type="range" id="sfx-volume-slider" min="0" max="1" step="0.01" value="1">
                </div>
                <div class="controls-info">
            <h3>Contrôles</h3>
            <p><strong>Clavier :</strong></p>
            <ul>
                <li><strong>Déplacement :</strong> ZQSD</li>
                <li><strong>Pause :</strong> Échap</li>
            </ul>
            <p><strong>Mobile :</strong></p>
            <ul>
                <li><strong>Déplacement :</strong> Joystick virtuel</li>
            </ul>
        </div>
                <button id="optionsBackButton">Retour</button>
            </div>
        </div>
        <!-- Écran de Victoire -->
        <div id="victory-modal" class="modal">
            <div class="modal-content">
                <h2>VICTOIRE !</h2>
                <p>Vous avez survécu 30 minutes !</p>
                <button onclick="window.location.reload()">Recommencer</button>
            </div>
        </div>

        <!-- Contrôles du son et plein écran -->
        <div id="sound-controls">
            <button id="fullscreenButton">Plein Écran</button>
            <button id="toggle-music-button">Musique: ON</button>
            <button id="toggle-sfx-button">Effets Sonores: ON</button>
        </div>
        
        <!-- Contrôles pour mobile -->
        <div id="mobile-controls">
            <div id="joystick-base">
                <div id="joystick-stick"></div>
            </div>
        </div>
    </div>

    <!-- Élément audio pour la musique de fond -->
    <audio id="background-music" loop>
        <source src="music/mainmenumusic.mp3" type="audio/mpeg">
        Votre navigateur ne supporte pas l'élément audio.
    </audio>

    <!-- Lien vers le script externe, 'defer' assure que le script s'exécute après le chargement du HTML -->
    <script src="script.js" defer></script>
</body>
</html>
